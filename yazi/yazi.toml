# Yazi設定ファイル
# Ref: https://minerva.mamansoft.net/2025-09-14-yazi-tui-file-manager-finder-replacement

[mgr]
ratio = [1, 4, 3]  # 左パネル、中央パネル、右パネルの比率
sort_by = "alphabetical"
sort_sensitive = false
sort_reverse = false
sort_dir_first = true
linemode = "none"
show_hidden = false
show_symlink = true
scrolloff = 5
mouse_enabled = true

[preview]
tab_size = 2
max_width = 600
max_height = 900
image_filter = "triangle"
image_quality = 75

[opener]
# Neovimで編集（複数ファイル対応）
# block = true でnvimが終了するまでyaziをブロック
edit = [
	{ run = 'nvim "$@"', block = true, desc = "Edit in Neovim", for = "macos" },
	{ run = 'nvim "$@"', block = true, desc = "Edit in Neovim", for = "unix" },
]
# Finderで表示（macOS）
reveal = [
	{ run = 'open -R "$1"', desc = "Reveal in Finder", for = "macos" },
]
# デフォルトで開く
open = [
	{ run = 'open "$@"', desc = "Open", for = "macos" },
	{ run = 'xdg-open "$@"', desc = "Open", for = "linux" },
]

[open]
rules = [
	{ mime = "text/*", use = [ "edit" ] },
	{ mime = "image/*", use = [ "open" ] },
	{ mime = "video/*", use = [ "open" ] },
	{ mime = "audio/*", use = [ "open" ] },
	# 空ファイルの MIME は環境によって `inode/x-empty` 以外になることがある
	{ mime = "application/x-empty", use = [ "edit" ] },
	{ mime = "inode/x-empty", use = [ "edit" ] },
	{ mime = "application/json", use = [ "edit" ] },
	{ mime = "application/xml", use = [ "edit" ] },
	{ mime = "application/x-yaml", use = [ "edit" ] },
	{ mime = "application/x-toml", use = [ "edit" ] },
	{ mime = "application/x-sh", use = [ "edit" ] },
	{ mime = "application/x-shellscript", use = [ "edit" ] },
	{ mime = "application/x-lua", use = [ "edit" ] },
	{ mime = "application/x-python", use = [ "edit" ] },
	{ mime = "application/x-rust", use = [ "edit" ] },
	{ mime = "application/x-go", use = [ "edit" ] },
	{ mime = "application/x-javascript", use = [ "edit" ] },
	{ mime = "application/x-typescript", use = [ "edit" ] },
	{ mime = "application/x-html", use = [ "edit" ] },
	{ mime = "application/x-css", use = [ "edit" ] },
	{ mime = "application/x-markdown", use = [ "edit" ] },
]

[task]
micro_workers = 50
bizarre_retry = 5
image_alloc = 536870912  # 512MB
max_preview_size = 10485760  # 10MB

